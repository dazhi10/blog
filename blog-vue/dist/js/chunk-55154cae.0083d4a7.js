(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55154cae"],{"013f":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"container"},[r("h1",{staticClass:"loginTitle"}),r("div",{staticStyle:{height:"500px"}},[1==e.login?r("div",{staticClass:"loginBox"},[e._m(0),r("el-form",{ref:"userFrom",attrs:{rules:e.rules,model:e.userFrom}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"邮箱"},model:{value:e.userFrom.username,callback:function(r){e.$set(e.userFrom,"username",r)},expression:"userFrom.username"}})],1),r("el-form-item",{attrs:{prop:"password","label-width":"20"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.loginEnterFun.apply(null,arguments)}},model:{value:e.userFrom.password,callback:function(r){e.$set(e.userFrom,"password",r)},expression:"userFrom.password"}})],1)],1),e._m(1),r("div",{staticClass:"lr-btn tcolors-bg",on:{click:function(r){return e.gotoHome("userFrom")}}},[e._v("登录")])],1):r("div",{staticClass:"registerBox"},[e._m(2),r("el-form",{ref:"userFrom",attrs:{rules:e.rules,model:e.userFrom}},[r("el-form-item",{attrs:{prop:"nusername"}},[r("el-input",{attrs:{type:"text",placeholder:"邮箱"},model:{value:e.userFrom.nusername,callback:function(r){e.$set(e.userFrom,"nusername",r)},expression:"userFrom.nusername"}})],1),r("el-form-item",{attrs:{prop:"npassword"}},[r("el-input",{attrs:{type:"password",placeholder:"密码: 6-12位英文、数字、下划线"},model:{value:e.userFrom.npassword,callback:function(r){e.$set(e.userFrom,"npassword",r)},expression:"userFrom.npassword"}})],1),r("el-form-item",{attrs:{prop:"npassword2"}},[r("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.userFrom.npassword2,callback:function(r){e.$set(e.userFrom,"npassword2",r)},expression:"userFrom.npassword2"}})],1)],1),r("div",{staticClass:"lr-btn tcolors-bg",on:{click:function(r){return e.newRegister("userFrom")}}},[e._v("注册")])],1)])])])},o=[function(){var e=this,r=e._self._c;return r("div",{staticClass:"lr-title"},[r("h1",[e._v("登录")]),r("p",[e._v(" 新用户"),r("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=0"}},[e._v("注册")])])])},function(){var e=this,r=e._self._c;return r("h3",[r("a",{attrs:{href:""}},[e._v("忘记密码？")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"lr-title"},[r("h1",[e._v("注册")]),r("p",[e._v(" 已有账号"),r("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=1"}},[e._v("登录")])])])}],n=(s("14d9"),s("c24f")),a=s("5f87"),i={name:"Login",data(){return{userFrom:{username:"",password:"",nusername:"",npassword:"",npassword2:""},login:0,loginErr:!1,loginTitle:"用户名或密码错误",urlstate:0,rules:{username:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}],nusername:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],npassword:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}],npassword2:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]}}},methods:{gotoHome(e){this.$refs[e].validate(r=>{if(!r)return console.log("error submit!!"),!1;Object(n["d"])(this.userFrom.username,this.userFrom.password).then(r=>{Object(a["c"])(r.token),localStorage.setItem("userInfo",JSON.stringify(r.userInfo)),this.userFrom={},this.resetForm(e),this.$message({message:"登录成功",type:"success"}),this.$router.push("/Home")})})},resetForm(e){this.$refs[e].resetFields()},routeChange:function(){var e=this;e.login=void 0==e.$route.query.login?1:parseInt(e.$route.query.login),e.urlstate=void 0==e.$route.query.urlstate?0:e.$route.query.urlstate},registerEnterFun:function(e){var r=window.event?e.keyCode:e.which;13==r&&(this.newRegister(),Object(n["e"])())},newRegister(e){this.$refs[e].validate(r=>{if(!r)return console.log("error submit!!"),!1;this.userFrom.npassword===this.userFrom.npassword2?Object(n["e"])(this.userFrom.nusername,this.userFrom.npassword).then(r=>{this.$message({message:r,type:"success"}),this.userFrom={},this.resetForm(e),this.$router.push({path:"/Login?login=1"})}):this.$message({message:"两次密码不相同!",type:"error"})})},goLogin:function(){this.$router.push({path:"/Login?login=1"})},goRegister:function(){this.$router.push({path:"/Login?login=0"})}},watch:{$route:"routeChange"},created(){var e=this;e.routeChange()}},u=i,l=(s("af29"),s("2877")),m=Object(l["a"])(u,t,o,!1,null,null,null);r["default"]=m.exports},3740:function(e,r,s){},af29:function(e,r,s){"use strict";s("3740")}}]);
//# sourceMappingURL=chunk-55154cae.0083d4a7.js.map