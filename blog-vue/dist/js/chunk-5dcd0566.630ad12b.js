(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dcd0566"],{"1d22":function(s,a,t){"use strict";t("d3c8")},3929:function(s,a,t){"use strict";t.r(a);var e=function(){var s=this,a=s._self._c;return a("div",[a("wbc-nav"),a("div",{staticClass:"container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:s.isEdit,expression:"isEdit"}],staticClass:"tcommonBox"},[s._m(0),a("section",[a("ul",{staticClass:"userInfoBox"},[a("li",{staticClass:"avatarlist"},[a("span",{staticClass:"leftTitle"},[s._v("头像")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"img",action:s.uploadURL,"show-file-list":!1,"on-success":s.handleAvatarSuccess,"before-upload":s.beforeAvatarUpload}},[s.userInfoObj.avatar?a("img",{staticClass:"avatar",attrs:{src:s.userInfoObj.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[s._v("点击上传头像，只能上传jpg/png文件，且不超过1mb")])])],1),a("li",{staticClass:"username"},[a("span",{staticClass:"leftTitle"},[s._v("昵称")]),a("el-input",{attrs:{placeholder:"昵称"},model:{value:s.userInfoObj.nickName,callback:function(a){s.$set(s.userInfoObj,"nickName",a)},expression:"userInfoObj.nickName"}}),s._v(" "),a("i",{staticClass:"fa fa-wa fa-asterisk"})],1),a("li",[a("span",{staticClass:"leftTitle"},[s._v("电子邮件")]),a("span",[s._v(s._s(s.userInfoObj.userName))])]),a("li",[a("span",{staticClass:"leftTitle"},[s._v("性别")]),[a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:s.userInfoObj.sex,callback:function(a){s.$set(s.userInfoObj,"sex",a)},expression:"userInfoObj.sex"}},[s._v("男")]),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:s.userInfoObj.sex,callback:function(a){s.$set(s.userInfoObj,"sex",a)},expression:"userInfoObj.sex"}},[s._v("女")])]],2)]),a("div",{staticClass:"saveInfobtn"},[a("a",{staticClass:"tcolors-bg",attrs:{href:"javascript:void(0);"},on:{click:function(a){s.isEdit=!s.isEdit}}},[s._v("返 回")]),a("a",{staticClass:"tcolors-bg",attrs:{href:"javascript:void(0);"},on:{click:s.saveInfoFun}},[s._v("保 存")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEdit,expression:"!isEdit"}],staticClass:"tcommonBox"},[a("header",[a("h1",[s._v(" 个人中心 "),a("span",{staticClass:"gotoEdit",on:{click:function(a){s.isEdit=!s.isEdit}}},[a("i",{staticClass:"fa fa-wa fa-edit"}),s._v("编辑")])])]),a("section",[a("el-skeleton",{attrs:{rows:6,animated:"",loading:s.loading}},[a("ul",{staticClass:"userInfoBox"},[a("li",{staticClass:"avatarlist"},[a("span",{staticClass:"leftTitle"},[s._v("头像")]),a("div",{staticClass:"avatar-uploader"},[a("img",{staticClass:"avatar",attrs:{src:s.userInfoObj.avatar}})])]),a("li",{staticClass:"username"},[a("span",{staticClass:"leftTitle"},[s._v("昵称")]),a("span",[s._v(s._s(s.userInfoObj.nickName))])]),a("li",[a("span",{staticClass:"leftTitle"},[s._v("电子邮件")]),a("span",[s._v(s._s(s.userInfoObj.userName))])]),a("li",[a("span",{staticClass:"leftTitle"},[s._v("性别")]),a("span",[s._v(s._s(0==s.userInfoObj.sex?"男":"女"))])]),a("li",[a("span",{staticClass:"leftTitle"},[s._v("注册日期")]),a("span",[s._v(s._s(s.userInfoObj.createTime))])])])])],1)])])],1)},i=[function(){var s=this,a=s._self._c;return a("header",[a("h1",[s._v(" 编辑个人资料 ")])])}],n=t("71c2"),o=t("c24f"),r=t("4360"),l={name:"UserInfo",data(){return{uploadURL:"",isEdit:!1,userInfo:{},userInfoObj:"",loading:!0}},methods:{handleAvatarSuccess(s,a){200==s.code?(this.userInfoObj.avatar=s.data,this.userInfoObj.head_start=1):this.$message.error("上传图片失败")},beforeAvatarUpload(s){const a="image/png"==s.type||"image/jpg"==s.type||"image/jpeg"==s.type,t=s.size/1024/1024<1;return a||this.$message.error("上传头像图片只能是 JPG/JPEG/PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 1MB!"),a&&t},saveInfoFun:function(){var s=this;s.userInfoObj.nickName?Object(o["c"])(s.userInfoObj).then(a=>{s.$message.success("保存成功！"),s.isEdit=!1,s.routeChange()}):s.$message.error("昵称为必填项，请填写昵称")},routeChange:function(){var s=this;localStorage.getItem("userInfo")?(s.haslogin=!0,s.userInfo=JSON.parse(localStorage.getItem("userInfo")),s.userId=s.userInfo.id,Object(o["a"])(s.userId).then(a=>{s.userInfoObj=a,s.userInfoObj.head_start=0})):s.haslogin=!1,this.timeout=setTimeout(()=>{this.loading=!1},500)}},components:{"wbc-nav":n["a"]},watch:{$route:"routeChange"},created(){this.routeChange(),this.uploadURL=r["a"].state.baseURL+"upload"}},c=l,u=(t("1d22"),t("2877")),f=Object(u["a"])(c,e,i,!1,null,null,null);a["default"]=f.exports},d3c8:function(s,a,t){}}]);
//# sourceMappingURL=chunk-5dcd0566.630ad12b.js.map